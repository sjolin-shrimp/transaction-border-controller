
running 2 tests

ğŸ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PIZZA DELIVERY ESCROW SIMULATION
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ Setup:
   Buyer (Alice): 0x00000000000000000000000000000000000001fe
   Seller (Pizza Restaurant): 0x0000000000000000000000000000000000000133
   Initial buyer balance: 1000000000 wei
   Initial seller balance: 500000000 wei

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Step 1: ğŸ“¦ Creating escrow for pizza order...
   Amount: 25000000 wei ($25.00)
   Commitment window: 30 minutes (1800s)
   Claim window: 1 hour (3600s)
   Timed release: enabled (1 hour)

ğŸ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PIZZA DELIVERY WITH TIMED RELEASE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ Scenario: Buyer forgets to confirm delivery
   Timed release will automatically pay restaurant

   âœ… Escrow created
   ğŸ†” Escrow ID: 0xc867d1ad5183c930
âœ… Escrow funded: 30000000 wei

ğŸš— Pizza delivered...

Step 2: âœ… Restaurant accepts order...
   State transition: Created â†’ Accepted

Step 3: ğŸ’° Buyer deposits payment into escrow...
â° Buyer hasn't confirmed delivery
   Waiting for timed release window...
   Buyer balance: 1000000000 â†’ 975000000 wei
   Amount locked: 25000000 wei
   State transition: Accepted â†’ Funded

Step 4: ğŸ• Pizza preparation and delivery...
   ğŸ‘¨â€ğŸ³ Restaurant preparing pizza...
   ğŸ“¦ Pizza ready for delivery
   â° Timed release triggered!
   ğŸš— Delivery driver dispatched
  ğŸ” Generating ZK proof...
  âœ… Proof generated: 0x2230783030303030

ğŸ’¸ Automatic payment released
   Seller received: 30000000 wei
   Receipt ID: 1

ğŸ“Š Current Status:
   ğŸ’° Buyer balance: 970000000 wei
   ğŸ’° Seller balance: 530000000 wei
   ğŸ“¦ Active escrows: 1
   ğŸ§¾ Total receipts: 1

âœ¨ Timed Release: SUCCESS
   - Delivery completed
   - Payment automatically released
   - No buyer action required

.   ğŸ“ Pizza in transit...
   ğŸ  Pizza delivered to customer!

Step 5: ğŸ“¬ Buyer confirms delivery...
   State transition: Funded â†’ Delivered

Step 6: ğŸ’¸ Executing settlement...
  ğŸ” Generating ZK proof...
  âœ… Proof generated: 0x2230783030303030
   Seller balance: 500000000 â†’ 525000000 wei
   Payment received: 25000000 wei
   State transition: Delivered â†’ Settled

Step 7: ğŸ§¾ Receipt generated and stored...
   Receipt ID: 1
   Buyer: 0x00000000000000000000000000000000000001fe
   Seller: 0x0000000000000000000000000000000000000133
   Amount: 25000000 wei
   Proof hash: 0x2230783030303030
   Timestamp: 1763091953

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”


ğŸ“Š Current Status:
   ğŸ’° Buyer balance: 975000000 wei
   ğŸ’° Seller balance: 525000000 wei
   ğŸ“¦ Active escrows: 1
   ğŸ§¾ Total receipts: 1

âœ¨ Pizza Delivery Escrow: SUCCESS
   - Order fulfilled
   - Payment transferred
   - Receipt stored
   - All parties satisfied

.
test result: ok. 2 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.78s

